---
layout: post
title: (javascript) Scope.
categories: [javascript, scope]
tags: [javascript, scope]
#fullview: true
description: 자바스크립트 Scope.
comments: true
published: true
---

Scope
===

`타자치는 개발자 - 김의태`

### Scope 스코프 
* 흔히들 <u>변수의 스코프</u> 라고 말한다.<br/>

```
Scope : 1. (무엇을 하거나 이룰 수 있는) 기회
        2. (주제, 조직, 활동 등이 다루는) 범위
        
[네이버 어학사전]
```

지금 현재 말하는 `Scope`의 의미는 `범위`에 가깝다고 말할 수 있다.<br/>
다시말해, `변수의 Scope`는 `변수를 사용할 수 있는 범위`로 해석이 가능하다.<br/>
ES5 까지는 `Scope`의 범위가 `함수 단위의 Scope`이다.<br/>
아래 코드를 보며 이해해 보자.

```javascript
// 전역 변수 Scope
var num1 = 5;
var num2 = 10;

if(num1 < num2){
    var num3 = 30;
}else{
    // 전역 변수는 공유되기때문에 여기서는 var를 생략가능
    var num3 = 50;
}

var func = function(){ // 함수 단위의 Scope가 시작
    var num1 = 15;
    var num4 = 20;
    console.log(num1); // 15, 현재 스코프에 num1이 있기때문에 현재 스코프의 값을 출력한다.
}
console.log(num3); // 30, 함수단위 스코프이기 때문에 같은 전역 공간에 있는 num3값을 출력한다. 
func();
console.log(num4); // Uncaught ReferenceError : num4 is not defined, 함수 단위의 스코프이기 때문에 함수에서 쓰인 변수는 함수에서만 사용 가능하다.
```

여기서 자바와의 큰 차이점 중 하나를 볼 수 있다.<br/>
다른 언어들은 `블록 단위`의 스코프를 가지고 있어, if문에서도 별도의 스코프를 가지고있지만<br/>
자바스크립트에는 `함수 단위`의 스코프가 존재 한다.

### Scope Chaining(스코프 체이닝)
```
chaining : 1. 체이닝
           2. 연쇄(적 처리)
        
[네이버 어학사전]
```

* 범위 안에서 연쇄적으로 처리하는(?)<br/>
아래 코드를 보며 이해 해 보자.

```javascript
var num1 = 10;
var func1 = function(){ // 외부 함수 Scope(func1)의 시작
    var num2 = 15;
    var func2 = function(){ // 내부 함수 Scope(func2)의 시작
        // 1. 현재 스코프(func2)에는 num1 변수가 존재 하지 않는다.
        // 2. 스코프 체인을 타고 스코프 func1로 올라간다.
        // 3. 스코프 func1에도 num1 변수가 존재 하지 않는다.
        // 4. 스코프 체인을 타고 전역 스코프로 올라간다.
        // 5. 전역 스코프의 num1변수를 참조해 num1을 출력한다.
        console.log(num1); // 10

        // 1. 현재 스코프(func2)에는 num2 변수가 존재 하지 않는다.
        // 2. 스코프 체인을 타고 스코프 func1로 올라간다.
        // 3. 스코프 func1에 num2 변수를 참조해 num2를 출력한다.
        console.log(num2); // 15
    }
    func2(); // 내부 함수 func2 호출
}
func1(); // 함수 func1을 호출
```

### strict mode ([Strict mode | MDN](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Strict_mode))

* ES5에서 새로 생긴 모드이다.
* 코드의 문법을 좀 더 깐깐하게 검사해서 오류를 표출 하는 모드.

```javascript
'use strict';
// 전역 스코프 상단에 위 구문을 넣어주거나
// 사용하려는 함수 바디 상단에만 넣어주면 된다.
// 미지원 브라우저는 그냥 문자열로 인식하고 오류를 발생시키지 않는다.

var num1 = 10;
var func1 = function(){
    // 전역 스코프에 존재하는 변수이기때문에 덮어씌우면서 정상 작동한다.
    num1 = 30;
    // 스코프 체인 상에 존재하지 않는 변수를 var없이 선언하면 오류 발생.
    num2 = 50; // Uncaught ReferenceError: num2 is not defined
}
// 스코프 체인 상에 존재하지 않는 변수를 var없이 선언하면 오류 발생.
num3 = 100; // Uncaught ReferenceError: num3 is not defined
func1();
```